<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Pruebas</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        #salida, #vel{
            padding:20px;
            border:solid black 5px;
        }
    </style>
    <link rel="shortcut icon" href="#" />
</head>
<body>
    <div id="salida"></div>
    <div id="vel"></div>
    
    <script defer>
        let accelerometer = null;
        let salida = document.getElementById("salida");
        let vel = document.getElementById("vel");
        salida.innerHTML="inicio";
        navigator.permissions.query({ name: "accelerometer" }).then((result) => {
            if (result.state === "denied") {
                console.log("No da permiso para usar el sensor, usar el slider de abajo");
                salida.innerHTML("Permiso denegado para usar el sensor.");
                //poner slider
                return;
            }
            try {
                salida.innerHTML="lectura correcta del sensor";
                accelerometer = new Accelerometer({ frequency: 60 });
                accelerometer.addEventListener("reading", () => {
                    vel.innerHTML=`Acceleration along the X-axis ${accelerometer.x}`;
                    vel.innerHTML+=`<br>Acceleration along the y-axis ${accelerometer.y}`;
                    vel.innerHTML+=`<br>Acceleration along the z-axis ${accelerometer.z}`;
                });
                accelerometer.start();
            } catch (error) {
                // Handle construction errors.
                if (error.name === "SecurityError") {
                    // See the note above about permissions policy.
                    salida.innerHTML="Sensor construction was blocked by a permissions policy.";
                } else if (error.name === "ReferenceError") {
                    salida.innerHTML="Sensor is not supported by the User Agent.";
                } else {
                    salida.innerHTML="Ha ocurrido un error completamente diferente "+error.name;
                    throw error;
                }
            }
        });
    </script>
</body>
</html>




